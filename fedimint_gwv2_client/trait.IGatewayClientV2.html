<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An interface between module implementation and the general `Gateway`"><title>IGatewayClientV2 in fedimint_gwv2_client - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fedimint_gwv2_client" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0-nightly (ccf3198de 2025-06-05)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../fedimint_gwv2_client/index.html">fedimint_<wbr>gwv2_<wbr>client</a><span class="version">0.9.0-alpha</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">IGateway<wbr>Client<wbr>V2</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.complete_htlc" title="complete_htlc">complete_htlc</a></li><li><a href="#tymethod.is_direct_swap" title="is_direct_swap">is_direct_swap</a></li><li><a href="#tymethod.min_contract_amount" title="min_contract_amount">min_contract_amount</a></li><li><a href="#tymethod.pay" title="pay">pay</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate fedimint_<wbr>gwv2_<wbr>client</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">fedimint_gwv2_client</a></div><h1>Trait <span class="trait">IGatewayClientV2</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/fedimint_gwv2_client/lib.rs.html#611-648">Source</a> </span></div><pre class="rust item-decl"><code>pub trait IGatewayClientV2:
    <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>
    + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> {
    // Required methods
    fn <a href="#tymethod.complete_htlc" class="fn">complete_htlc</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 self,
        htlc_response: <a class="struct" href="../fedimint_lightning/struct.InterceptPaymentResponse.html" title="struct fedimint_lightning::InterceptPaymentResponse">InterceptPaymentResponse</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.is_direct_swap" class="fn">is_direct_swap</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        invoice: &amp;'life1 Bolt11Invoice,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.98/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="../fedimint_lnv2_common/contracts/struct.IncomingContract.html" title="struct fedimint_lnv2_common::contracts::IncomingContract">IncomingContract</a>, <a class="type" href="../fedimint_client/client/handle/type.ClientHandleArc.html" title="type fedimint_client::client::handle::ClientHandleArc">ClientHandleArc</a>)&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.pay" class="fn">pay</a>&lt;'life0, 'async_trait&gt;(
        &amp;'life0 self,
        invoice: Bolt11Invoice,
        max_delay: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
        max_fee: <a class="struct" href="../fedimint_core/amount/struct.Amount.html" title="struct fedimint_core::amount::Amount">Amount</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">32</a>], <a class="enum" href="../fedimint_lightning/enum.LightningRpcError.html" title="enum fedimint_lightning::LightningRpcError">LightningRpcError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait</span>;
<span class="item-spacer"></span>    fn <a href="#tymethod.min_contract_amount" class="fn">min_contract_amount</a>&lt;'life0, 'life1, 'async_trait&gt;(
        &amp;'life0 self,
        federation_id: &amp;'life1 <a class="struct" href="../fedimint_core/config/struct.FederationId.html" title="struct fedimint_core::config::FederationId">FederationId</a>,
        amount: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
    ) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.98/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="../fedimint_core/amount/struct.Amount.html" title="struct fedimint_core::amount::Amount">Amount</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;
       <span class="where">where Self: 'async_trait,
             'life0: 'async_trait,
             'life1: 'async_trait</span>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An interface between module implementation and the general <code>Gateway</code></p>
<p>To abstract away and decouple the core gateway from the modules, the
interface between the is expressed as a trait. The core gateway handles
LNv2 operations that require access to the database or lightning node.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.complete_htlc" class="method"><a class="src rightside" href="../src/fedimint_gwv2_client/lib.rs.html#613">Source</a><h4 class="code-header">fn <a href="#tymethod.complete_htlc" class="fn">complete_htlc</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 self,
    htlc_response: <a class="struct" href="../fedimint_lightning/struct.InterceptPaymentResponse.html" title="struct fedimint_lightning::InterceptPaymentResponse">InterceptPaymentResponse</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Use the gateway’s lightning node to complete a payment</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.is_direct_swap" class="method"><a class="src rightside" href="../src/fedimint_gwv2_client/lib.rs.html#623-626">Source</a><h4 class="code-header">fn <a href="#tymethod.is_direct_swap" class="fn">is_direct_swap</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    invoice: &amp;'life1 Bolt11Invoice,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.98/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(<a class="struct" href="../fedimint_lnv2_common/contracts/struct.IncomingContract.html" title="struct fedimint_lnv2_common::contracts::IncomingContract">IncomingContract</a>, <a class="type" href="../fedimint_client/client/handle/type.ClientHandleArc.html" title="type fedimint_client::client::handle::ClientHandleArc">ClientHandleArc</a>)&gt;&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Determines if the payment can be completed using a direct swap to
another federation.</p>
<p>A direct swap is determined by checking the gateway’s connected
lightning node against the invoice’s payee lightning node. If they
are the same, then the gateway can use another client to complete
the payment be swapping ecash instead of a payment over the
Lightning network.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.pay" class="method"><a class="src rightside" href="../src/fedimint_gwv2_client/lib.rs.html#629-634">Source</a><h4 class="code-header">fn <a href="#tymethod.pay" class="fn">pay</a>&lt;'life0, 'async_trait&gt;(
    &amp;'life0 self,
    invoice: Bolt11Invoice,
    max_delay: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
    max_fee: <a class="struct" href="../fedimint_core/amount/struct.Amount.html" title="struct fedimint_core::amount::Amount">Amount</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;[<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u8.html">u8</a>; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.array.html">32</a>], <a class="enum" href="../fedimint_lightning/enum.LightningRpcError.html" title="enum fedimint_lightning::LightningRpcError">LightningRpcError</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Initiates a payment over the Lightning network.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.min_contract_amount" class="method"><a class="src rightside" href="../src/fedimint_gwv2_client/lib.rs.html#643-647">Source</a><h4 class="code-header">fn <a href="#tymethod.min_contract_amount" class="fn">min_contract_amount</a>&lt;'life0, 'life1, 'async_trait&gt;(
    &amp;'life0 self,
    federation_id: &amp;'life1 <a class="struct" href="../fedimint_core/config/struct.FederationId.html" title="struct fedimint_core::config::FederationId">FederationId</a>,
    amount: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="type" href="https://docs.rs/anyhow/1.0.98/anyhow/type.Result.html" title="type anyhow::Result">Result</a>&lt;<a class="struct" href="../fedimint_core/amount/struct.Amount.html" title="struct fedimint_core::amount::Amount">Amount</a>&gt;&gt; + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'async_trait&gt;&gt;<div class="where">where
    Self: 'async_trait,
    'life0: 'async_trait,
    'life1: 'async_trait,</div></h4></section></summary><div class="docblock"><p>Computes the minimum contract amount necessary for making an outgoing
payment.</p>
<p>The minimum contract amount must contain transaction fees to cover the
gateway’s transaction fee and optionally additional fee to cover the
gateway’s Lightning fee if the payment goes over the Lightning
network.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"></div><script src="../trait.impl/fedimint_gwv2_client/trait.IGatewayClientV2.js" async></script></section></div></main></body></html>