<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `db` mod in crate `fedimint_api`."><title>fedimint_api::db - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-505eba68f310f6bf.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-f501212b8b071243.css"><link rel="stylesheet" disabled href="../../static.files/dark-e92fc12c34ff89d3.css"><link rel="stylesheet" disabled href="../../static.files/ayu-c8c85693c8a4f9db.css"><script id="default-settings" ></script><script src="../../static.files/storage-3891ce972e3a2bf8.js"></script><script defer src="../../static.files/main-364b95f387bc3166.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../fedimint_api/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../fedimint_api/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module db</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">fedimint_api</a>::<wbr><a class="mod" href="#">db</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/fedimint_api/db/mod.rs.html#1-1445">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="mod" href="mem_impl/index.html" title="mod fedimint_api::db::mem_impl">mem_impl</a></div></div><div class="item-row"><div class="item-left"><a class="mod" href="tests/index.html" title="mod fedimint_api::db::tests">tests</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="struct" href="struct.CommitTracker.html" title="struct fedimint_api::db::CommitTracker">CommitTracker</a></div><div class="item-right docblock-short">A handle to a type-erased database implementation</div></div><div class="item-row"><div class="item-left"><a class="struct" href="struct.Database.html" title="struct fedimint_api::db::Database">Database</a></div></div><div class="item-row"><div class="item-left"><a class="struct" href="struct.DatabaseInner.html" title="struct fedimint_api::db::DatabaseInner">DatabaseInner</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left"><a class="struct" href="struct.DatabaseTransaction.html" title="struct fedimint_api::db::DatabaseTransaction">DatabaseTransaction</a></div><div class="item-right docblock-short">A handle to a type-erased database implementation</div></div><div class="item-row"><div class="item-left"><a class="struct" href="struct.IsolatedDatabaseTransaction.html" title="struct fedimint_api::db::IsolatedDatabaseTransaction">IsolatedDatabaseTransaction</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">IsolatedDatabaseTransaction is a wrapper around DatabaseTransaction that is responsible for
inserting and striping prefixes before reading or writing to the database. It does this by
implementing IDatabaseTransaction and manipulating the prefix bytes in the raw insert/get
functions. This is done to isolate modules/module instances from each other inside the database,
which allows the same module to be instantiated twice or two different modules to use the same
key.</div></div><div class="item-row"><div class="item-left"><a class="struct" href="struct.ModuleDatabaseTransaction.html" title="struct fedimint_api::db::ModuleDatabaseTransaction">ModuleDatabaseTransaction</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short"><code>ModuleDatabaseTransaction</code> is an isolated database transaction that
consumes an existing <code>DatabaseTransaction</code>. Unlike <code>IsolatedDatabaseTransaction</code>,
<code>ModuleDatabaseTransaction</code> can be owned by the module as long as it has a handle
to the isolated <code>Database</code>. This allows the module to make changes only affecting
itâ€™s own portion of the database and also being able to commit those changes.
From the moduleâ€™s perspective, the <code>Database</code> is isolated and calling <code>begin_transaction</code>
will always produce a <code>ModuleDatabaseTransaction</code>, which is isolated from other
modules by prepending a prefix to each key.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="enum" href="enum.AutocommitError.html" title="enum fedimint_api::db::AutocommitError">AutocommitError</a></div><div class="item-right docblock-short">Error returned when the autocommit function fails</div></div><div class="item-row"><div class="item-left"><a class="enum" href="enum.DecodingError.html" title="enum fedimint_api::db::DecodingError">DecodingError</a></div></div><div class="item-row"><div class="item-left"><a class="enum" href="enum.TestDbKeyPrefix.html" title="enum fedimint_api::db::TestDbKeyPrefix">TestDbKeyPrefix</a></div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="constant" href="constant.MODULE_GLOBAL_PREFIX.html" title="constant fedimint_api::db::MODULE_GLOBAL_PREFIX">MODULE_GLOBAL_PREFIX</a></div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="trait" href="trait.DatabaseKey.html" title="trait fedimint_api::db::DatabaseKey">DatabaseKey</a></div></div><div class="item-row"><div class="item-left"><a class="trait" href="trait.DatabaseKeyPrefix.html" title="trait fedimint_api::db::DatabaseKeyPrefix">DatabaseKeyPrefix</a></div></div><div class="item-row"><div class="item-left"><a class="trait" href="trait.DatabaseKeyPrefixConst.html" title="trait fedimint_api::db::DatabaseKeyPrefixConst">DatabaseKeyPrefixConst</a></div></div><div class="item-row"><div class="item-left"><a class="trait" href="trait.DatabaseValue.html" title="trait fedimint_api::db::DatabaseValue">DatabaseValue</a></div></div><div class="item-row"><div class="item-left"><a class="trait" href="trait.IDatabase.html" title="trait fedimint_api::db::IDatabase">IDatabase</a></div></div><div class="item-row"><div class="item-left"><a class="trait" href="trait.IDatabaseTransaction.html" title="trait fedimint_api::db::IDatabaseTransaction">IDatabaseTransaction</a></div><div class="item-right docblock-short">Fedimint requires that the database implementation implement Snapshot Isolation.
Snapshot Isolation is a database isolation level that guarantees consistent reads
from the time that the snapshot was created (at transaction creation time). Transactions
with Snapshot Isolation level will only commit if there has been no write to the modified
keys since the snapshot (i.e. write-write conflicts are prevented).</div></div><div class="item-row"><div class="item-left"><a class="trait" href="trait.SerializableDatabaseValue.html" title="trait fedimint_api::db::SerializableDatabaseValue">SerializableDatabaseValue</a></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="fn" href="fn.decode_value.html" title="fn fedimint_api::db::decode_value">decode_value</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.expect_write_conflict.html" title="fn fedimint_api::db::expect_write_conflict">expect_write_conflict</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_commit.html" title="fn fedimint_api::db::verify_commit">verify_commit</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_find_by_prefix.html" title="fn fedimint_api::db::verify_find_by_prefix">verify_find_by_prefix</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_insert_elements.html" title="fn fedimint_api::db::verify_insert_elements">verify_insert_elements</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_module_db.html" title="fn fedimint_api::db::verify_module_db">verify_module_db</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_module_prefix.html" title="fn fedimint_api::db::verify_module_prefix">verify_module_prefix</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_phantom_entry.html" title="fn fedimint_api::db::verify_phantom_entry">verify_phantom_entry</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_prevent_dirty_reads.html" title="fn fedimint_api::db::verify_prevent_dirty_reads">verify_prevent_dirty_reads</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_prevent_nonrepeatable_reads.html" title="fn fedimint_api::db::verify_prevent_nonrepeatable_reads">verify_prevent_nonrepeatable_reads</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_read_own_writes.html" title="fn fedimint_api::db::verify_read_own_writes">verify_read_own_writes</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_remove_by_prefix.html" title="fn fedimint_api::db::verify_remove_by_prefix">verify_remove_by_prefix</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_remove_existing.html" title="fn fedimint_api::db::verify_remove_existing">verify_remove_existing</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_remove_nonexisting.html" title="fn fedimint_api::db::verify_remove_nonexisting">verify_remove_nonexisting</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_rollback_to_savepoint.html" title="fn fedimint_api::db::verify_rollback_to_savepoint">verify_rollback_to_savepoint</a></div></div><div class="item-row"><div class="item-left"><a class="fn" href="fn.verify_string_prefix.html" title="fn fedimint_api::db::verify_string_prefix">verify_string_prefix</a></div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left"><a class="type" href="type.PrefixIter.html" title="type fedimint_api::db::PrefixIter">PrefixIter</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="fedimint_api" data-themes="" data-resource-suffix="" data-rustdoc-version="1.69.0-nightly (f3126500f 2023-02-02)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" ></div></body></html>