<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Fedimint Core library"><title>fedimint_core - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fedimint_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (ef0027897 2024-05-12)" data-channel="nightly" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../fedimint_core/index.html">fedimint_core</a><span class="version">0.4.0-alpha</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#attributes">Attribute Macros</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">fedimint_core</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/fedimint_core/lib.rs.html#1-696">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Fedimint Core library</p>
<p><code>fedimint-core</code> contains are commonly used types, utilities and primitives,
shared between both client and server code.</p>
<p>Things that are server-side only typically live in <code>fedimint-server</code>, and
client-side only in <code>fedimint-client</code>.</p>
<h4 id="wasm-support"><a class="doc-anchor" href="#wasm-support">Â§</a>Wasm support</h4>
<p>All code in <code>fedimint-core</code> needs to compile on Wasm, and <code>fedimint-core</code>
includes helpers and wrappers around non-wasm-safe utitlies.</p>
<p>In particular:</p>
<ul>
<li><a href="task/index.html" title="mod fedimint_core::task"><code>fedimint_core::task</code></a> for task spawning and control</li>
<li><a href="time/index.html" title="mod fedimint_core::time"><code>fedimint_core::time</code></a> for time-related operations</li>
</ul>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.ServerModule"><code>pub use module::<a class="trait" href="module/trait.ServerModule.html" title="trait fedimint_core::module::ServerModule">ServerModule</a>;</code></div></li><li><div class="item-name" id="reexport.Tiered"><code>pub use tiered::<a class="struct" href="tiered/struct.Tiered.html" title="struct fedimint_core::tiered::Tiered">Tiered</a>;</code></div></li><li><div class="item-name" id="reexport.server"><code>pub use crate::core::<a class="mod" href="core/server/index.html" title="mod fedimint_core::core::server">server</a>;</code></div></li><li><div class="item-name" id="reexport.anyhow"><code>pub use <a class="mod" href="https://docs.rs/anyhow/1.0.85/anyhow/index.html" title="mod anyhow">anyhow</a>;</code></div></li><li><div class="item-name" id="reexport.secp256k1"><code>pub use secp256k1;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="tiered_multi/index.html" title="mod fedimint_core::tiered_multi">tiered_multi</a>::*;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="admin_client/index.html" title="mod fedimint_core::admin_client">admin_client</a></div><div class="desc docblock-short">Admin (guardian) client types</div></li><li><div class="item-name"><a class="mod" href="amount/index.html" title="mod fedimint_core::amount">amount</a></div></li><li><div class="item-name"><a class="mod" href="backup/index.html" title="mod fedimint_core::backup">backup</a></div><div class="desc docblock-short">Federation-stored client backups
Federation-stored client backups</div></li><li><div class="item-name"><a class="mod" href="bitcoin_migration/index.html" title="mod fedimint_core::bitcoin_migration">bitcoin_migration</a></div><div class="desc docblock-short">Gradual bitcoin dependency migration helpers</div></li><li><div class="item-name"><a class="mod" href="bls12_381_serde/index.html" title="mod fedimint_core::bls12_381_serde">bls12_381_serde</a></div><div class="desc docblock-short">Legacy serde encoding for bls12_381</div></li><li><div class="item-name"><a class="mod" href="config/index.html" title="mod fedimint_core::config">config</a></div><div class="desc docblock-short">Federation configuration</div></li><li><div class="item-name"><a class="mod" href="core/index.html" title="mod fedimint_core::core">core</a></div><div class="desc docblock-short">Fundamental types
Fedimint Core API (common) module interface</div></li><li><div class="item-name"><a class="mod" href="db/index.html" title="mod fedimint_core::db">db</a></div><div class="desc docblock-short">Database handling
Core Fedimint database traits and types</div></li><li><div class="item-name"><a class="mod" href="encoding/index.html" title="mod fedimint_core::encoding">encoding</a></div><div class="desc docblock-short">Consensus encoding
This module defines a binary encoding interface which is more suitable for
consensus critical encoding than e.g. <code>bincode</code>. Over time all structs that
need to be encoded to binary will be migrated to this interface.</div></li><li><div class="item-name"><a class="mod" href="endpoint_constants/index.html" title="mod fedimint_core::endpoint_constants">endpoint_constants</a></div></li><li><div class="item-name"><a class="mod" href="envs/index.html" title="mod fedimint_core::envs">envs</a></div><div class="desc docblock-short">Common environment variables</div></li><li><div class="item-name"><a class="mod" href="epoch/index.html" title="mod fedimint_core::epoch">epoch</a></div></li><li><div class="item-name"><a class="mod" href="fmt_utils/index.html" title="mod fedimint_core::fmt_utils">fmt_utils</a></div><div class="desc docblock-short">Formatting helpers</div></li><li><div class="item-name"><a class="mod" href="hex/index.html" title="mod fedimint_core::hex">hex</a></div><div class="desc docblock-short">Hex encoding helpers</div></li><li><div class="item-name"><a class="mod" href="invite_code/index.html" title="mod fedimint_core::invite_code">invite_code</a></div><div class="desc docblock-short">Federation invite code</div></li><li><div class="item-name"><a class="mod" href="macros/index.html" title="mod fedimint_core::macros">macros</a></div><div class="desc docblock-short">Common macros</div></li><li><div class="item-name"><a class="mod" href="module/index.html" title="mod fedimint_core::module">module</a></div><div class="desc docblock-short">Extenable module sysystem
Fedimint supports modules to allow extending itâ€™s functionality.
Some of the standard functionality is implemented in form of modules as
well.</div></li><li><div class="item-name"><a class="mod" href="net/index.html" title="mod fedimint_core::net">net</a></div><div class="desc docblock-short">Peer networking</div></li><li><div class="item-name"><a class="mod" href="runtime/index.html" title="mod fedimint_core::runtime">runtime</a></div><div class="desc docblock-short">Runtime (wasm32 vs native) differences handling
Copyright 2021 The Matrix.org Foundation C.I.C.
Abstraction over an executor so we can spawn tasks under WASM the same way
we do usually.</div></li><li><div class="item-name"><a class="mod" href="session_outcome/index.html" title="mod fedimint_core::session_outcome">session_outcome</a></div><div class="desc docblock-short">Atomic BFT unit containing consensus items</div></li><li><div class="item-name"><a class="mod" href="task/index.html" title="mod fedimint_core::task">task</a></div><div class="desc docblock-short">Task handling, including wasm safe logic</div></li><li><div class="item-name"><a class="mod" href="tiered/index.html" title="mod fedimint_core::tiered">tiered</a></div><div class="desc docblock-short">Types handling per-denomination values</div></li><li><div class="item-name"><a class="mod" href="tiered_multi/index.html" title="mod fedimint_core::tiered_multi">tiered_multi</a></div><div class="desc docblock-short">Types handling multiple per-denomination values</div></li><li><div class="item-name"><a class="mod" href="time/index.html" title="mod fedimint_core::time">time</a></div><div class="desc docblock-short">Time handling, wasm safe functionality</div></li><li><div class="item-name"><a class="mod" href="timing/index.html" title="mod fedimint_core::timing">timing</a></div><div class="desc docblock-short">Timing helpers</div></li><li><div class="item-name"><a class="mod" href="transaction/index.html" title="mod fedimint_core::transaction">transaction</a></div><div class="desc docblock-short">Fedimint transaction (inpus + outputs + signature) types</div></li><li><div class="item-name"><a class="mod" href="txoproof/index.html" title="mod fedimint_core::txoproof">txoproof</a></div><div class="desc docblock-short">Peg-in txo proofs</div></li><li><div class="item-name"><a class="mod" href="util/index.html" title="mod fedimint_core::util">util</a></div><div class="desc docblock-short">General purpose utilities</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.__api_endpoint.html" title="macro fedimint_core::__api_endpoint">__api_endpoint</a></div><div class="desc docblock-short">Example</div></li><li><div class="item-name"><a class="macro" href="macro._dyn_newtype_define_inner.html" title="macro fedimint_core::_dyn_newtype_define_inner">_dyn_newtype_define_inner</a></div></li><li><div class="item-name"><a class="macro" href="macro._dyn_newtype_define_with_instance_id_inner.html" title="macro fedimint_core::_dyn_newtype_define_with_instance_id_inner">_dyn_newtype_define_with_instance_id_inner</a></div></li><li><div class="item-name"><a class="macro" href="macro._dyn_newtype_impl_deref_mut.html" title="macro fedimint_core::_dyn_newtype_impl_deref_mut">_dyn_newtype_impl_deref_mut</a></div></li><li><div class="item-name"><a class="macro" href="macro.async_trait_maybe_send.html" title="macro fedimint_core::async_trait_maybe_send">async_trait_maybe_send</a></div><div class="desc docblock-short">async trait that use MaybeSend</div></li><li><div class="item-name"><a class="macro" href="macro.deserialize_as_encodable_hex.html" title="macro fedimint_core::deserialize_as_encodable_hex">deserialize_as_encodable_hex</a></div></li><li><div class="item-name"><a class="macro" href="macro.dyn_newtype_define.html" title="macro fedimint_core::dyn_newtype_define">dyn_newtype_define</a></div><div class="desc docblock-short">Define â€œdyn newtypeâ€ (a newtype over <code>dyn Trait</code>)</div></li><li><div class="item-name"><a class="macro" href="macro.dyn_newtype_display_passthrough.html" title="macro fedimint_core::dyn_newtype_display_passthrough">dyn_newtype_display_passthrough</a></div><div class="desc docblock-short">Implements the <code>Display</code> trait for dyn newtypes whose traits implement
<code>Display</code></div></li><li><div class="item-name"><a class="macro" href="macro.dyn_newtype_impl_dyn_clone_passthrough.html" title="macro fedimint_core::dyn_newtype_impl_dyn_clone_passthrough">dyn_newtype_impl_dyn_clone_passthrough</a></div><div class="desc docblock-short">Implement <code>Clone</code> on a â€œdyn newtypeâ€</div></li><li><div class="item-name"><a class="macro" href="macro.erased_eq_no_instance_id.html" title="macro fedimint_core::erased_eq_no_instance_id">erased_eq_no_instance_id</a></div></li><li><div class="item-name"><a class="macro" href="macro.extensible_associated_module_type.html" title="macro fedimint_core::extensible_associated_module_type">extensible_associated_module_type</a></div><div class="desc docblock-short">Wraps a type into an enum with a default variant, this allows to add new
versions of the type in the future. Depending on context unknown versions
may be ignored or lead to errors. E.g. the client might just ignore an
unknown input version since it cannot originate from itself while the server
would reject it for not being able to validate its correctness.</div></li><li><div class="item-name"><a class="macro" href="macro.fedimint_build_code_version_env.html" title="macro fedimint_core::fedimint_build_code_version_env">fedimint_build_code_version_env</a></div><div class="desc docblock-short">Get value of <a href="envs/constant.FEDIMINT_BUILD_CODE_VERSION_ENV.html" title="constant fedimint_core::envs::FEDIMINT_BUILD_CODE_VERSION_ENV"><code>FEDIMINT_BUILD_CODE_VERSION_ENV</code></a> at compile time</div></li><li><div class="item-name"><a class="macro" href="macro.impl_db_lookup.html" title="macro fedimint_core::impl_db_lookup">impl_db_lookup</a></div></li><li><div class="item-name"><a class="macro" href="macro.impl_db_record.html" title="macro fedimint_core::impl_db_record">impl_db_record</a></div><div class="desc docblock-short">This is a helper macro that generates the implementations of
<code>DatabaseRecord</code> necessary for reading/writing to the
database and fetching by prefix.</div></li><li><div class="item-name"><a class="macro" href="macro.maybe_add_send.html" title="macro fedimint_core::maybe_add_send">maybe_add_send</a></div><div class="desc docblock-short">MaybeSync can not be used in <code>dyn $Trait + MaybeSend</code></div></li><li><div class="item-name"><a class="macro" href="macro.maybe_add_send_sync.html" title="macro fedimint_core::maybe_add_send_sync">maybe_add_send_sync</a></div><div class="desc docblock-short">See <code>maybe_add_send</code></div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_dyn_newtype_clone_passthrough.html" title="macro fedimint_core::module_plugin_dyn_newtype_clone_passthrough">module_plugin_dyn_newtype_clone_passthrough</a></div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_dyn_newtype_define.html" title="macro fedimint_core::module_plugin_dyn_newtype_define">module_plugin_dyn_newtype_define</a></div><div class="desc docblock-short">Define a â€œmodule plugin dyn-newtypeâ€ which is like a standard â€œdyn newtypeâ€,
but with associated â€œmodule_instance_idâ€.</div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_dyn_newtype_display_passthrough.html" title="macro fedimint_core::module_plugin_dyn_newtype_display_passthrough">module_plugin_dyn_newtype_display_passthrough</a></div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_dyn_newtype_encode_decode.html" title="macro fedimint_core::module_plugin_dyn_newtype_encode_decode">module_plugin_dyn_newtype_encode_decode</a></div><div class="desc docblock-short">Implement <code>Encodable</code> and <code>Decodable</code> for a â€œmodule dyn newtypeâ€</div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_dyn_newtype_eq_passthrough.html" title="macro fedimint_core::module_plugin_dyn_newtype_eq_passthrough">module_plugin_dyn_newtype_eq_passthrough</a></div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_static_trait_define.html" title="macro fedimint_core::module_plugin_static_trait_define">module_plugin_static_trait_define</a></div><div class="desc docblock-short">Define a â€œpluginâ€ trait</div></li><li><div class="item-name"><a class="macro" href="macro.module_plugin_static_trait_define_config.html" title="macro fedimint_core::module_plugin_static_trait_define_config">module_plugin_static_trait_define_config</a></div><div class="desc docblock-short">A copy of <code>module_lugin_static_trait_define</code> but for <code>ClientConfig</code>, which
is a snowflake that requires <code>: Serialize</code> and conditional implementation
for <code>DynUnknown</code>. The macro is getting gnarly, so seems easier to
copy-paste-modify, than pile up conditional argument.</div></li><li><div class="item-name"><a class="macro" href="macro.plugin_types_trait_impl_common.html" title="macro fedimint_core::plugin_types_trait_impl_common">plugin_types_trait_impl_common</a></div><div class="desc docblock-short">Implements the necessary traits for all associated types of a
<code>FederationServer</code> module.</div></li><li><div class="item-name"><a class="macro" href="macro.plugin_types_trait_impl_config.html" title="macro fedimint_core::plugin_types_trait_impl_config">plugin_types_trait_impl_config</a></div><div class="desc docblock-short">Implements the necessary traits for all configuration related types of a
<code>FederationServer</code> module.</div></li><li><div class="item-name"><a class="macro" href="macro.push_db_key_items.html" title="macro fedimint_core::push_db_key_items">push_db_key_items</a></div></li><li><div class="item-name"><a class="macro" href="macro.push_db_pair_items.html" title="macro fedimint_core::push_db_pair_items">push_db_pair_items</a></div></li><li><div class="item-name"><a class="macro" href="macro.push_db_pair_items_no_serde.html" title="macro fedimint_core::push_db_pair_items_no_serde">push_db_pair_items_no_serde</a></div></li><li><div class="item-name"><a class="macro" href="macro.serde_as_encodable_hex.html" title="macro fedimint_core::serde_as_encodable_hex">serde_as_encodable_hex</a></div></li><li><div class="item-name"><a class="macro" href="macro.serialize_as_encodable_hex.html" title="macro fedimint_core::serialize_as_encodable_hex">serialize_as_encodable_hex</a></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Amount.html" title="struct fedimint_core::Amount">Amount</a></div><div class="desc docblock-short">Represents an amount of BTC inside the system. The base denomination is
milli satoshi for now, this is also why the amount type from rust-bitcoin
isnâ€™t used instead.</div></li><li><div class="item-name"><a class="struct" href="struct.Feerate.html" title="struct fedimint_core::Feerate">Feerate</a></div></li><li><div class="item-name"><a class="struct" href="struct.NumPeers.html" title="struct fedimint_core::NumPeers">NumPeers</a></div></li><li><div class="item-name"><a class="struct" href="struct.OutPoint.html" title="struct fedimint_core::OutPoint">OutPoint</a></div><div class="desc docblock-short"><code>OutPoint</code> represents a globally unique output in a transaction</div></li><li><div class="item-name"><a class="struct" href="struct.PeerId.html" title="struct fedimint_core::PeerId">PeerId</a></div></li><li><div class="item-name"><a class="struct" href="struct.TransactionId.html" title="struct fedimint_core::TransactionId">TransactionId</a></div><div class="desc docblock-short">A transaction id for peg-ins, peg-outs and reissuances</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.BitcoinAmountOrAll.html" title="enum fedimint_core::BitcoinAmountOrAll">BitcoinAmountOrAll</a></div><div class="desc docblock-short">Amount of bitcoin to send, or â€œallâ€ to send all available funds</div></li><li><div class="item-name"><a class="enum" href="enum.CoreError.html" title="enum fedimint_core::CoreError">CoreError</a></div></li><li><div class="item-name"><a class="enum" href="enum.ParseAmountError.html" title="enum fedimint_core::ParseAmountError">ParseAmountError</a></div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.SATS_PER_BITCOIN.html" title="constant fedimint_core::SATS_PER_BITCOIN">SATS_PER_BITCOIN</a></div></li><li><div class="item-name"><a class="constant" href="constant.WITNESS_SCALE_FACTOR.html" title="constant fedimint_core::WITNESS_SCALE_FACTOR">WITNESS_SCALE_FACTOR</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.BitcoinHash.html" title="trait fedimint_core::BitcoinHash">BitcoinHash</a></div><div class="desc docblock-short">Trait which applies to hashes of all types.</div></li><li><div class="item-name"><a class="trait" href="trait.NumPeersExt.html" title="trait fedimint_core::NumPeersExt">NumPeersExt</a></div><div class="desc docblock-short">for consensus-related calculations given the number of peers</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.msats.html" title="fn fedimint_core::msats">msats</a></div><div class="desc docblock-short">Shorthand for <a href="struct.Amount.html#method.from_msats" title="associated function fedimint_core::Amount::from_msats"><code>Amount::from_msats</code></a></div></li><li><div class="item-name"><a class="fn" href="fn.sats.html" title="fn fedimint_core::sats">sats</a></div><div class="desc docblock-short">Shorthand for <a href="struct.Amount.html#method.from_sats" title="associated function fedimint_core::Amount::from_sats"><code>Amount::from_sats</code></a></div></li><li><div class="item-name"><a class="fn" href="fn.weight_to_vbytes.html" title="fn fedimint_core::weight_to_vbytes">weight_to_vbytes</a></div><div class="desc docblock-short">Converts weight to virtual bytes, defined in <a href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#transaction-size-calculations">BIP-141</a> as weight / 4
(rounded up to the next integer).</div></li></ul><h2 id="attributes" class="section-header">Attribute Macros<a href="#attributes" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="attr" href="attr.apply.html" title="attr fedimint_core::apply">apply</a></div></li></ul></section></div></main></body></html>